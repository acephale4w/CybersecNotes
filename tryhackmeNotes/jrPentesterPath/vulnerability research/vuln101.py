import requests

#NVD API
base_url = "https://services.nvd.nist.gov/rest/json/cves/2.0/"

#Dates
start_date = "2021-07-01T00:00:00.000"
end_date = "2021-07-31T23:59:59.999"
parameters = {
    "pubStartDate": start_date,
    "pubEndDate": end_date
}

try:
    response = requests.get(base_url, params=parameters)
    
    response.raise_for_status()
    
    data = response.json()
    
    print(data)
        
    vulnerabilities = data.get('vulnerabilities', [])    
   
    cve_count = len(vulnerabilities)
    print(f"Number of CVEs published in July 2021: {cve_count}")

except requests.RequestException as e:
    print(f"Failed to retrieve data from the NVD API: {e}")

except ValueError as e:
    print(f"Failed to parse JSON response: {e}")
